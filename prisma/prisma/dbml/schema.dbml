//// ------------------------------------------------------
//// THIS FILE WAS AUTOMATICALLY GENERATED (DO NOT MODIFY)
//// ------------------------------------------------------

Table User {
  id Int [pk, increment]
  name String [not null]
  email String [unique, not null]
  password String [not null]
  cpf String [unique]
  cnpj String [unique]
  crm String [unique]
  nationalId String [unique]
  userRole UserRole [not null]
  eventRegistrations EventRegistration [not null]
  activityRegistrations ActivityRegistration [not null]
  eventsOrganized Event [not null]
}

Table Event {
  id Int [pk, increment]
  name String [not null]
  organizerId Int [not null]
  description String [not null]
  format Format [not null]
  location String
  userDocument Boolean [not null]
  banner String
  eventType EventType [not null]
  startDate DateTime [not null]
  endDate DateTime [not null]
  maxCapacity Int
  complementaryHours Int
  status RegistrationStatus [not null]
  activities Activity [not null]
  eventRegistrations EventRegistration [not null]
  eventTags EventTag [not null]
  userOrganizer User [not null]
}

Table Activity {
  id Int [pk, increment]
  name String [not null]
  organizerId Int [not null]
  description String [not null]
  format Format [not null]
  location String
  userDocument Boolean [not null]
  banner String
  startDate DateTime [not null]
  startTime String [not null]
  activityType ActivityType [not null]
  maxCapacity Int [not null]
  complementaryHours Int [not null]
  eventId Int [not null]
  event Event [not null]
  activityRegistrations ActivityRegistration [not null]
}

Table EventRegistration {
  id Int [pk, increment]
  eventId Int [not null]
  userId Int [not null]
  status RegistrationStatus [not null]
  timestamp DateTime [default: `now()`, not null]
  event Event [not null]
  user User [not null]
}

Table ActivityRegistration {
  id Int [pk, increment]
  activityId Int [not null]
  userId Int [not null]
  status RegistrationStatus [not null]
  timestamp DateTime [default: `now()`, not null]
  activity Activity [not null]
  user User [not null]
}

Table Field {
  id Int [pk, increment]
  name String [not null]
  type EventFieldType [not null]
  required Boolean [not null, default: false]
  refId Int [not null]
  refType FieldType [not null]
  fieldResponses FieldResponse [not null]
}

Table FieldResponse {
  id Int [pk, increment]
  RegistrationId Int [not null]
  FieldId Int [not null]
  value String [not null]
  type FieldType [not null]
  createdAt DateTime [default: `now()`, not null]
  Field Field [not null]
}

Table Tag {
  id Int [pk, increment]
  name String [unique, not null]
  eventTags EventTag [not null]
}

Table EventTag {
  eventId Int [not null]
  tagId Int [not null]
  event Event [not null]
  tag Tag [not null]

  indexes {
    (eventId, tagId) [pk]
  }
}

Enum Format {
  PRESENTIAL
  ONLINE
  HYBRID
}

Enum EventType {
  SIMPLE
  LARGE
}

Enum ActivityType {
  LECTURE
  SHORT_COURSE
  WORKSHOP
  SEMINAR
}

Enum RegistrationStatus {
  PENDING
  CONFIRMED
  CANCELED
}

Enum EventFieldType {
  STRING
  NUMBER
  DATE
  BOOLEAN
}

Enum RegistrationState {
  ACTIVE
  CLOSED
  CANCELED
  DRAFT
}

Enum UserRole {
  ADMIN
  ORGANIZER
  PARTICIPANT
}

Enum FieldType {
  EVENT
  ACTIVITY
}

Ref: Event.organizerId > User.id

Ref: Activity.eventId > Event.id

Ref: EventRegistration.eventId > Event.id

Ref: EventRegistration.userId > User.id

Ref: ActivityRegistration.activityId > Activity.id

Ref: ActivityRegistration.userId > User.id

Ref: FieldResponse.FieldId > Field.id

Ref: EventTag.eventId > Event.id

Ref: EventTag.tagId > Tag.id